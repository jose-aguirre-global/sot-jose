/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){var t,e={};function n(){}function r(t){return t}function i(t){return!!t}function o(t){return!t}var s="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;function u(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function a(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=s&&(t=s.async),e.noConflict=function(){return s.async=t,e};var c=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===c.call(t)};function f(t){return h(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function l(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function p(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function d(t){return p(Array(t),function(t,e){return e})}function m(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var E=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function C(t){var e,n,r=-1;return f(t)?(e=t.length,function(){return++r<e?r:null}):(n=E(t),e=n.length,function(){return++r<e?n[r]:null})}function y(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function A(t){return function(e,n,r){return t(e,r)}}var B="function"==typeof setImmediate&&setImmediate,v=B?function(t){B(t)}:function(t){setTimeout(function(){t()},0)};function D(t){return function(e,r,i){i=a(i||n);var o=C(e=e||[]);if(t<=0)return i(null);var s=!1,c=0,h=!1;!function n(){if(s&&c<=0)return i(null);for(;c<t&&!h;){var a=o();if(null===a)return s=!0,void(c<=0&&i(null));c+=1,r(e[a],a,u(function(t){c-=1,t?(i(t),h=!0):n()}))}}()}}function F(t){return function(n,r,i){return t(e.eachOf,n,r,i)}}function g(t){return function(e,n,r,i){return t(D(n),e,r,i)}}function w(t){return function(n,r,i){return t(e.eachOfSeries,n,r,i)}}function b(t,e,r,i){i=a(i||n);var o=f(e=e||[])?[]:{};t(e,function(t,e,n){r(t,function(t,r){o[e]=r,n(t)})},function(t){i(t,o)})}function S(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function _(t,e,n,r){S(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function T(t,e,n){return function(r,i,o,s){function u(){s&&s(n(!1,void 0))}function a(t,r,i){if(!s)return i();o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()})}arguments.length>3?t(r,i,a,u):(s=o,o=i,t(r,a,u))}}function k(t,e){return e}function x(t,e,r){r=r||n;var i=f(e)?[]:{};t(e,function(t,e,n){t(y(function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)}))},function(t){r(t,i)})}function R(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function I(t,r,i){if(null==r)r=1;else if(0===r)throw new Error("Concurrency must not be zero");function o(t,r,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(t.started=!0,h(r)||(r=[r]),0===r.length&&t.idle())return e.setImmediate(function(){t.drain()});l(r,function(e){var r={data:e,callback:o||n};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()}),e.setImmediate(t.process)}function s(t,e){return function(){a-=1;var n=!1,r=arguments;l(e,function(t){l(c,function(e,r){e!==t||n||(c.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+a===0&&t.drain(),t.process()}}var a=0,c=[],f={tasks:[],concurrency:r,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(t,e){o(f,t,!1,e)},kill:function(){f.drain=n,f.tasks=[]},unshift:function(t,e){o(f,t,!0,e)},process:function(){if(!f.paused&&a<f.concurrency&&f.tasks.length)for(;a<f.concurrency&&f.tasks.length;){var e=f.payload?f.tasks.splice(0,f.payload):f.tasks.splice(0,f.tasks.length),n=p(e,function(t){return t.data});0===f.tasks.length&&f.empty(),a+=1,c.push(e[0]);var r=u(s(f,e));t(n,r)}},length:function(){return f.tasks.length},running:function(){return a},workersList:function(){return c},idle:function(){return f.tasks.length+a===0},pause:function(){f.paused=!0},resume:function(){if(!1!==f.paused){f.paused=!1;for(var t=Math.min(f.concurrency,f.tasks.length),n=1;n<=t;n++)e.setImmediate(f.process)}}};return f}function O(t){return y(function(e,n){e.apply(null,n.concat([y(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&l(n,function(e){console[t](e)}))})]))})}function W(t){return function(e,n,r){t(d(e),n,r)}}function M(t){return y(function(e,n){var r=y(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function P(t){return y(function(n){var r=n.pop();n.push(function(){var t=arguments;i?e.setImmediate(function(){r.apply(null,t)}):r.apply(null,t)});var i=!0;t.apply(this,n),i=!1})}"object"==typeof process&&"function"==typeof process.nextTick?e.nextTick=process.nextTick:e.nextTick=v,e.setImmediate=B?v:e.nextTick,e.forEach=e.each=function(t,n,r){return e.eachOf(t,A(n),r)},e.forEachSeries=e.eachSeries=function(t,n,r){return e.eachOfSeries(t,A(n),r)},e.forEachLimit=e.eachLimit=function(t,e,n,r){return D(e)(t,A(n),r)},e.forEachOf=e.eachOf=function(t,e,r){r=a(r||n);for(var i,o=C(t=t||[]),s=0;null!=(i=o());)s+=1,e(t[i],i,u(c));function c(t){s--,t?r(t):null===i&&s<=0&&r(null)}0===s&&r(null)},e.forEachOfSeries=e.eachOfSeries=function(t,r,i){i=a(i||n);var o=C(t=t||[]),s=o();!function n(){var a=!0;if(null===s)return i(null);r(t[s],s,u(function(t){if(t)i(t);else{if(null===(s=o()))return i(null);a?e.setImmediate(n):n()}})),a=!1}()},e.forEachOfLimit=e.eachOfLimit=function(t,e,n,r){D(e)(t,n,r)},e.map=F(b),e.mapSeries=w(b),e.mapLimit=g(b),e.inject=e.foldl=e.reduce=function(t,n,r,i){e.eachOfSeries(t,function(t,e,i){r(n,t,function(t,e){n=e,i(t)})},function(t){i(t,n)})},e.foldr=e.reduceRight=function(t,n,i,o){var s=p(t,r).reverse();e.reduce(s,n,i,o)},e.transform=function(t,n,r,i){3===arguments.length&&(i=r,r=n,n=h(t)?[]:{}),e.eachOf(t,function(t,e,i){r(n,t,e,i)},function(t){i(t,n)})},e.select=e.filter=F(S),e.selectLimit=e.filterLimit=g(S),e.selectSeries=e.filterSeries=w(S),e.reject=F(_),e.rejectLimit=g(_),e.rejectSeries=w(_),e.any=e.some=T(e.eachOf,i,r),e.someLimit=T(e.eachOfLimit,i,r),e.all=e.every=T(e.eachOf,o,o),e.everyLimit=T(e.eachOfLimit,o,o),e.detect=T(e.eachOf,r,k),e.detectSeries=T(e.eachOfSeries,r,k),e.detectLimit=T(e.eachOfLimit,r,k),e.sortBy=function(t,n,r){function i(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}e.map(t,function(t,e){n(t,function(n,r){n?e(n):e(null,{value:t,criteria:r})})},function(t,e){if(t)return r(t);r(null,p(e.sort(i),function(t){return t.value}))})},e.auto=function(t,r,i){i||(i=r,r=null),i=a(i||n);var o=E(t),s=o.length;if(!s)return i(null);r||(r=s);var u={},c=0,f=[];function p(t){f.unshift(t)}function d(){s--,l(f.slice(0),function(t){t()})}p(function(){s||i(null,u)}),l(o,function(n){for(var o,s=h(t[n])?t[n]:[t[n]],a=y(function(t,r){if(c--,r.length<=1&&(r=r[0]),t){var o={};a=function(t,e){o[e]=t},l(E(s=u),function(t){a(s[t],t)}),o[n]=r,i(t,o)}else u[n]=r,e.setImmediate(d);var s,a}),C=s.slice(0,s.length-1),A=C.length;A--;){if(!(o=t[C[A]]))throw new Error("Has inexistant dependency");if(h(o)&&m(o,n)>=0)throw new Error("Has cyclic dependencies")}function B(){return c<r&&(t=function(t,e){return t&&u.hasOwnProperty(e)},e=!0,l(C,function(n,r,i){e=t(e,n,r,i)}),e)&&!u.hasOwnProperty(n);var t,e}B()?(c++,s[s.length-1](a,u)):p(function t(){B()&&(c++,(e=m(f,t))>=0&&f.splice(e,1),s[s.length-1](a,u));var e})})},e.retry=function(t,n,r){var i=5,o=0,s=[],u={times:i,interval:o};function a(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}var c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function h(t,n){function r(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},n)}}function i(t){return function(e){setTimeout(function(){e(null)},t)}}for(;u.times;){var o=!(u.times-=1);s.push(r(u.task,o)),!o&&u.interval>0&&s.push(i(u.interval))}e.series(s,function(e,n){n=n[n.length-1],(t||u.callback)(n.err,n.result)})}return c<=2&&"function"==typeof t&&(r=n,n=t),"function"!=typeof t&&a(u,t),u.callback=r,u.task=n,u.callback?h():h},e.waterfall=function(t,r){if(r=a(r||n),!h(t)){var i=new Error("First argument to waterfall must be an array of functions");return r(i)}if(!t.length)return r();!function t(e){return y(function(n,i){if(n)r.apply(null,[n].concat(i));else{var o=e.next();o?i.push(t(o)):i.push(r),P(e).apply(null,i)}})}(e.iterator(t))()},e.parallel=function(t,n){x(e.eachOf,t,n)},e.parallelLimit=function(t,e,n){x(D(e),t,n)},e.series=function(t,n){x(e.eachOfSeries,t,n)},e.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},e.apply=y(function(t,e){return y(function(n){return t.apply(null,e.concat(n))})}),e.concat=F(R),e.concatSeries=w(R),e.whilst=function(t,e,r){if(r=r||n,t()){var i=y(function(n,o){n?r(n):t.apply(this,o)?e(i):r(null)});e(i)}else r(null)},e.doWhilst=function(t,n,r){var i=0;return e.whilst(function(){return++i<=1||n.apply(this,arguments)},t,r)},e.until=function(t,n,r){return e.whilst(function(){return!t.apply(this,arguments)},n,r)},e.doUntil=function(t,n,r){return e.doWhilst(t,function(){return!n.apply(this,arguments)},r)},e.during=function(t,e,r){r=r||n;var i=y(function(e,n){e?r(e):(n.push(o),t.apply(this,n))}),o=function(t,n){t?r(t):n?e(i):r(null)};t(o)},e.doDuring=function(t,n,r){var i=0;e.during(function(t){i++<1?t(null,!0):n.apply(this,arguments)},t,r)},e.queue=function(t,e){return I(function(e,n){t(e[0],n)},e,1)},e.priorityQueue=function(t,r){function i(t,e){return t.priority-e.priority}var o=e.queue(t,r);return o.push=function(t,r,s){!function(t,r,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(t.started=!0,h(r)||(r=[r]),0===r.length)return e.setImmediate(function(){t.drain()});l(r,function(r){var u={data:r,priority:o,callback:"function"==typeof s?s:n};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,u,i)+1,0,u),t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)})}(o,t,r,s)},delete o.unshift,o},e.cargo=function(t,e){return I(t,1,e)},e.log=O("log"),e.dir=O("dir"),e.memoize=function(t,n){var i={},o={};n=n||r;var s=y(function(r){var s=r.pop(),u=n.apply(null,r);u in i?e.setImmediate(function(){s.apply(null,i[u])}):u in o?o[u].push(s):(o[u]=[s],t.apply(null,r.concat([y(function(t){i[u]=t;var e=o[u];delete o[u];for(var n=0,r=e.length;n<r;n++)e[n].apply(null,t)})])))});return s.memo=i,s.unmemoized=t,s},e.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},e.times=W(e.map),e.timesSeries=W(e.mapSeries),e.timesLimit=function(t,n,r,i){return e.mapLimit(d(t),n,r,i)},e.seq=function(){var t=arguments;return y(function(r){var i=this,o=r[r.length-1];"function"==typeof o?r.pop():o=n,e.reduce(t,r,function(t,e,n){e.apply(i,t.concat([y(function(t,e){n(t,e)})]))},function(t,e){o.apply(i,[t].concat(e))})})},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))},e.applyEach=M(e.eachOf),e.applyEachSeries=M(e.eachOfSeries),e.forever=function(t,e){var r=u(e||n),i=P(t);!function t(e){if(e)return r(e);i(t)}()},e.ensureAsync=P,e.constant=y(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),e.wrapSync=e.asyncify=function(t){return y(function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,n)})},"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("async",function(){return e}):s.async=e}(),function(t){"use strict";"function"==typeof define&&define.amd?define("sha1",[],t):window.sha1=t()}(function(){return function(){function t(t){for(var e="",n=7;n>=0;n--)e+="0123456789abcdef".charAt(t>>4*n&15);return e}function e(t,e,n){for(var r=1+(n+8>>6),i=new Array(16*r),o=0;o<16*r;o++)i[o]=0;for(o=0;o<n;o++)i[o>>2]|=(255&t[e+o])<<24-o%4*8;return i[o>>2]|=128<<24-o%4*8,i[16*r-1]=8*n,i}function n(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function r(t,e){return t<<e|t>>>32-e}function i(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function o(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function s(e){var n=u(e);return t(n[0])+t(n[1])+t(n[2])+t(n[3])+t(n[4])}function u(t){for(var e=new Array(80),s=1732584193,u=-271733879,a=-1732584194,c=271733878,h=-1009589776,f=0;f<t.length;f+=16){for(var l=s,p=u,d=a,m=c,E=h,C=0;C<80;C++){var y;e[C]=C<16?t[f+C]:r(e[C-3]^e[C-8]^e[C-14]^e[C-16],1),y=n(n(r(s,5),i(C,u,a,c)),n(n(h,e[C]),o(C))),h=c,c=a,a=r(u,30),u=s,s=y}s=n(s,l),u=n(u,p),a=n(a,d),c=n(c,m),h=n(h,E)}return new Array(s,u,a,c,h)}return{calcSHA1:function(t){return s(function(t){for(var e=1+(t.length+8>>6),n=new Array(16*e),r=0;r<16*e;r++)n[r]=0;for(r=0;r<t.length;r++)n[r>>2]|=t.charCodeAt(r)<<24-r%4*8;return n[r>>2]|=128<<24-r%4*8,n[16*e-1]=8*t.length,n}(t))},calcSHA1Hex:function(t){return s(function(t){for(var e=t.length+1>>1,n=1+(e+8>>6),r=new Array(16*n),i=0;i<16*n;i++)r[i]=0;for(i=0;i<e;i++)r[i>>2]|=parseInt(t.substr(2*i,2),16)<<24-i%4*8;return r[i>>2]|=128<<24-i%4*8,r[16*n-1]=8*e,r}(t))},calcSHA1BA:function(t){return s(e(t,0,t.length))},calcSHA1BAEx:function(t,n,r){return s(e(t,n,r))}}}()}),function(t){"use strict";"function"==typeof define&&define.amd?define("sjcl",[],t):window.sjcl=t()}(function(){"use strict";var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};return t.bitArray={bitSlice:function(e,n,r){return e=t.bitArray._shiftRight(e.slice(n/32),32-(31&n)).slice(1),void 0===r?e:t.bitArray.clamp(e,r-n)},extract:function(t,e,n){var r=Math.floor(-e-n&31);return(-32&(e+n-1^e)?t[e/32|0]<<32-r^t[e/32+1|0]>>>r:t[e/32|0]>>>r)&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n);var r=e[e.length-1],i=t.bitArray.getPartial(r);return 32===i?e.concat(n):t.bitArray._shiftRight(n,i,0|r,e.slice(0,e.length-1))},bitLength:function(e){var n,r=e.length;return 0===r?0:(n=e[r-1],32*(r-1)+t.bitArray.getPartial(n))},clamp:function(e,n){if(32*e.length<n)return e;var r=(e=e.slice(0,Math.ceil(n/32))).length;return n&=31,r>0&&n&&(e[r-1]=t.bitArray.partial(n,e[r-1]&2147483648>>n-1,1)),e},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1;var r,i=0;for(r=0;r<e.length;r++)i|=e[r]^n[r];return 0===i},_shiftRight:function(e,n,r,i){var o,s,u;for(void 0===i&&(i=[]);n>=32;n-=32)i.push(r),r=0;if(0===n)return i.concat(e);for(o=0;o<e.length;o++)i.push(r|e[o]>>>n),r=e[o]<<32-n;return s=e.length?e[e.length-1]:0,u=t.bitArray.getPartial(s),i.push(t.bitArray.partial(n+u&31,n+u>32?r:i.pop(),1)),i},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,n;for(e=0;e<t.length;++e)n=t[e],t[e]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return t}},t.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=t.codec.utf8String.toBits(e));var n,r=this._buffer=t.bitArray.concat(this._buffer,e),i=this._length,o=this._length=i+t.bitArray.bitLength(e);for(n=512+i&-512;n<=o;n+=512)this._block(r.splice(0,16));return this},finalize:function(){var e,n=this._buffer,r=this._h;for(e=(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)])).length+2;15&e;e++)n.push(0);for(n.push(Math.floor(this._length/4294967296)),n.push(0|this._length);n.length;)this._block(n.splice(0,16));return this.reset(),r},_init:[],_key:[],_precompute:function(){var t,e=0,n=2;function r(t){return 4294967296*(t-Math.floor(t))|0}t:for(;e<64;n++){for(t=2;t*t<=n;t++)if(n%t==0)continue t;e<8&&(this._init[e]=r(Math.pow(n,.5))),this._key[e]=r(Math.pow(n,1/3)),e++}},_block:function(t){var e,n,r,i,o=t.slice(0),s=this._h,u=this._key,a=s[0],c=s[1],h=s[2],f=s[3],l=s[4],p=s[5],d=s[6],m=s[7];for(e=0;e<64;e++)e<16?n=o[e]:(r=o[e+1&15],i=o[e+14&15],n=o[15&e]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+o[15&e]+o[e+9&15]|0),n=n+m+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(d^l&(p^d))+u[e],m=d,d=p,p=l,l=f+n|0,f=h,h=c,a=n+((c=a)&h^f&(c^h))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;s[0]=s[0]+a|0,s[1]=s[1]+c|0,s[2]=s[2]+h|0,s[3]=s[3]+f|0,s[4]=s[4]+l|0,s[5]=s[5]+p|0,s[6]=s[6]+d|0,s[7]=s[7]+m|0}},t.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var n,r,i,o,s,u=this._tables[0][4],a=this._tables[1],c=e.length,h=1;if(4!==c&&6!==c&&8!==c)throw new t.exception.invalid("invalid aes key size");for(this._key=[o=e.slice(0),s=[]],n=c;n<4*c+28;n++)i=o[n-1],(n%c==0||8===c&&n%c==4)&&(i=u[i>>>24]<<24^u[i>>16&255]<<16^u[i>>8&255]<<8^u[255&i],n%c==0&&(i=i<<8^i>>>24^h<<24,h=h<<1^283*(h>>7))),o[n]=o[n-c]^i;for(r=0;n;r++,n--)i=o[3&r?n:n-4],s[r]=n<=4||r<4?i:a[0][u[i>>>24]]^a[1][u[i>>16&255]]^a[2][u[i>>8&255]]^a[3][u[255&i]]},t.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,n,r,i,o,s,u,a=this._tables[0],c=this._tables[1],h=a[4],f=c[4],l=[],p=[];for(t=0;t<256;t++)p[(l[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!h[e];e^=r||1,n=p[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,h[e]=o,f[o]=e,u=16843009*l[i=l[r=l[e]]]^65537*i^257*r^16843008*e,s=257*l[o]^16843008*o,t=0;t<4;t++)a[t][e]=s=s<<24^s>>>8,c[t][o]=u=u<<24^u>>>8;for(t=0;t<5;t++)a[t]=a[t].slice(0),c[t]=c[t].slice(0)},_crypt:function(e,n){if(4!==e.length)throw new t.exception.invalid("invalid aes block size");var r,i,o,s,u=this._key[n],a=e[0]^u[0],c=e[n?3:1]^u[1],h=e[2]^u[2],f=e[n?1:3]^u[3],l=u.length/4-2,p=4,d=[0,0,0,0],m=this._tables[n],E=m[0],C=m[1],y=m[2],A=m[3],B=m[4];for(s=0;s<l;s++)r=E[a>>>24]^C[c>>16&255]^y[h>>8&255]^A[255&f]^u[p],i=E[c>>>24]^C[h>>16&255]^y[f>>8&255]^A[255&a]^u[p+1],o=E[h>>>24]^C[f>>16&255]^y[a>>8&255]^A[255&c]^u[p+2],f=E[f>>>24]^C[a>>16&255]^y[c>>8&255]^A[255&h]^u[p+3],p+=4,a=r,c=i,h=o;for(s=0;s<4;s++)d[n?3&-s:s]=B[a>>>24]<<24^B[c>>16&255]<<16^B[h>>8&255]<<8^B[255&f]^u[p++],r=a,a=c,c=h,h=f,f=r;return d}},t.prng=function(e){this._pools=[new t.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=e,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},t.prng.prototype={randomWords:function(e,n){var r,i,o=[],s=this.isReady(n);if(s===this._NOT_READY)throw new t.exception.notReady("generator isn't seeded");for(s&this._REQUIRES_RESEED&&this._reseedFromPools(!(s&this._READY)),r=0;r<e;r+=4)(r+1)%this._MAX_WORDS_PER_BURST==0&&this._gate(),i=this._gen4words(),o.push(i[0],i[1],i[2],i[3]);return this._gate(),o.slice(0,e)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=t},addEntropy:function(e,n,r){r=r||"user";var i,o,s,u,a=(new Date).valueOf(),c=this._robins[r],h=this.isReady(),f=0;switch(void 0===(i=this._collectorIds[r])&&(i=this._collectorIds[r]=this._collectorIdNext++),void 0===c&&(c=this._robins[r]=0),this._robins[r]=(this._robins[r]+1)%this._pools.length,typeof e){case"number":void 0===n&&(n=1),this._pools[c].update([i,this._eventId++,1,n,a,1,0|e]);break;case"object":if("[object Uint32Array]"===(u=Object.prototype.toString.call(e))){for(s=[],o=0;o<e.length;o++)s.push(e[o]);e=s}else for("[object Array]"!==u&&(f=1),o=0;o<e.length&&!f;o++)"number"!=typeof e[o]&&(f=1);if(!f){if(void 0===n)for(n=0,o=0;o<e.length;o++)for(s=e[o];s>0;)n++,s>>>=1;this._pools[c].update([i,this._eventId++,2,n,a,e.length].concat(e))}break;case"string":void 0===n&&(n=e.length),this._pools[c].update([i,this._eventId++,3,n,a,e.length]),this._pools[c].update(e);break;default:f=1}if(f)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[c]+=n,this._poolStrength+=n,h===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t||this._defaultParanoia];return this._strength>=e||this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1);else{if(!document.attachEvent)throw new t.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var n,r,i=this._callbacks[t],o=[];for(r in i)i.hasOwnProperty(r)&&i[r]===e&&o.push(r);for(n=0;n<o.length;n++)delete i[r=o[n]]},_bind:function(t){var e=this;return function(){t.apply(e,arguments)}},_gen4words:function(){for(var t=0;t<4&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new t.cipher.aes(this._key)},_reseed:function(e){this._key=t.hash.sha256.hash(this._key.concat(e)),this._cipher=new t.cipher.aes(this._key);for(var n=0;n<4&&(this._counter[n]=this._counter[n]+1|0,!this._counter[n]);n++);},_reseedFromPools:function(e){var n,r=[],i=0;for(this._nextReseed=r[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,n=0;n<16;n++)r.push(4294967296*Math.random()|0);for(n=0;n<this._pools.length&&(r=r.concat(this._pools[n].finalize()),i+=this._poolEntropy[n],this._poolEntropy[n]=0,e||!(this._reseedCount&1<<n));n++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new t.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=i,i>this._strength&&(this._strength=i),this._reseedCount++,this._reseed(r)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(e){var n,r;try{n=e.x||e.clientX||e.offsetX||0,r=e.y||e.clientY||e.offsetY||0}catch(t){n=0,r=0}0!=n&&0!=r&&t.random.addEntropy([n,r],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(e){var n=e.touches[0]||e.changedTouches[0],r=n.pageX||n.clientX,i=n.pageY||n.clientY;t.random.addEntropy([r,i],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(e){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?t.random.addEntropy(window.performance.now(),e,"loadtime"):t.random.addEntropy((new Date).valueOf(),e,"loadtime")},_accelerometerCollector:function(e){var n=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z;if(window.orientation){var r=window.orientation;"number"==typeof r&&t.random.addEntropy(r,1,"accelerometer")}n&&t.random.addEntropy(n,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(e,n){var r,i=t.random._callbacks[e],o=[];for(r in i)i.hasOwnProperty(r)&&o.push(i[r]);for(r=0;r<o.length;r++)o[r](n)}},t.random=new t.prng(6),function(){try{var e,n,r;if("undefined"!=typeof module&&module.exports&&(n=function(){try{return require("crypto")}catch(t){return null}}())&&n.randomBytes)e=n.randomBytes(128),e=new Uint32Array(new Uint8Array(e).buffer),t.random.addEntropy(e,1024,"crypto.randomBytes");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(r=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(r);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(r)}t.random.addEntropy(r,1024,"crypto.getRandomValues")}}catch(t){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(t))}}(),t.codec.hex={fromBits:function(e){var n,r="";for(n=0;n<e.length;n++)r+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return r.substr(0,t.bitArray.bitLength(e)/4)},toBits:function(e){var n,r,i=[];for(r=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",n=0;n<e.length;n+=8)i.push(0^parseInt(e.substr(n,8),16));return t.bitArray.clamp(i,4*r)}},t.codec.utf8String={fromBits:function(e){var n,r,i="",o=t.bitArray.bitLength(e);for(n=0;n<o/8;n++)0==(3&n)&&(r=e[n/4]),i+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(i))},toBits:function(e){e=unescape(encodeURIComponent(e));var n,r=[],i=0;for(n=0;n<e.length;n++)i=i<<8|e.charCodeAt(n),3==(3&n)&&(r.push(i),i=0);return 3&n&&r.push(t.bitArray.partial(8*(3&n),i)),r}},t.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,r){var i,o="",s=0,u=t.codec.base64._chars,a=0,c=t.bitArray.bitLength(e);for(r&&(u=u.substr(0,62)+"-_"),i=0;6*o.length<c;)o+=u.charAt((a^e[i]>>>s)>>>26),s<6?(a=e[i]<<6-s,s+=26,i++):(a<<=6,s-=6);for(;3&o.length&&!n;)o+="=";return o},toBits:function(e,n){e=e.replace(/\s|=/g,"");var r,i,o=[],s=0,u=t.codec.base64._chars,a=0;for(n&&(u=u.substr(0,62)+"-_"),r=0;r<e.length;r++){if((i=u.indexOf(e.charAt(r)))<0)throw new t.exception.invalid("this isn't base64!");s>26?(s-=26,o.push(a^i>>>s),a=i<<32-s):a^=i<<32-(s+=6)}return 56&s&&o.push(t.bitArray.partial(56&s,a,1)),o}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t}),function(t){"use strict";"function"==typeof define&&define.amd?define("BigInteger",[],t):window.BigInteger=t()}(function(){var t;function e(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new e(null)}"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,u=e>>15;--o>=0;){var a=32767&this[t],c=this[t++]>>15,h=u*a+c*s;i=((a=s*a+((32767&h)<<15)+n[r]+(1073741823&i))>>>30)+(h>>>15)+u*c+(i>>>30),n[r++]=1073741823&a}return i},t=30):"Netscape"!=navigator.appName?(e.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},t=26):(e.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,u=e>>14;--o>=0;){var a=16383&this[t],c=this[t++]>>14,h=u*a+c*s;i=((a=s*a+((16383&h)<<14)+n[r]+i)>>28)+(h>>14)+u*c,n[r++]=268435455&a}return i},t=28),e.prototype.DB=t,e.prototype.DM=(1<<t)-1,e.prototype.DV=1<<t;e.prototype.FV=Math.pow(2,52),e.prototype.F1=52-t,e.prototype.F2=2*t-52;var r,i,o=new Array;for(r="0".charCodeAt(0),i=0;i<=9;++i)o[r++]=i;for(r="a".charCodeAt(0),i=10;i<36;++i)o[r++]=i;for(r="A".charCodeAt(0),i=10;i<36;++i)o[r++]=i;function s(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function u(t,e){var n=o[t.charCodeAt(e)];return null==n?-1:n}function a(t){var e=n();return e.fromInt(t),e}function c(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function h(t){this.m=t}function f(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function l(t,e){return t&e}function p(t,e){return t|e}function d(t,e){return t^e}function m(t,e){return t&~e}function E(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function C(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function y(){}function A(t){return t}function B(t){this.r2=n(),this.q3=n(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}h.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},h.prototype.revert=function(t){return t},h.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},h.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},h.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},f.prototype.convert=function(t){var r=n();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(e.ZERO)>0&&this.m.subTo(r,r),r},f.prototype.revert=function(t){var e=n();return t.copyTo(e),this.reduce(e),e},f.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},f.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},f.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},e.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},e.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},e.prototype.fromString=function(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(t,n);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var a=8==r?255&t[i]:u(t,i);a<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},e.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},e.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},e.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(t/this.DB),u=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|u,u=(this[n]&o)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=u,e.t=this.t+s+1,e.s=this.s,e.clamp()},e.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},e.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},e.prototype.multiplyTo=function(t,n){var r=this.abs(),i=t.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},e.prototype.divRemTo=function(t,r,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var u=n(),a=this.s,h=t.s,f=this.DB-c(o[o.t-1]);f>0?(o.lShiftTo(f,u),s.lShiftTo(f,i)):(o.copyTo(u),s.copyTo(i));var l=u.t,p=u[l-1];if(0!=p){var d=p*(1<<this.F1)+(l>1?u[l-2]>>this.F2:0),m=this.FV/d,E=(1<<this.F1)/d,C=1<<this.F2,y=i.t,A=y-l,B=null==r?n():r;for(u.dlShiftTo(A,B),i.compareTo(B)>=0&&(i[i.t++]=1,i.subTo(B,i)),e.ONE.dlShiftTo(l,B),B.subTo(u,u);u.t<l;)u[u.t++]=0;for(;--A>=0;){var v=i[--y]==p?this.DM:Math.floor(i[y]*m+(i[y-1]+C)*E);if((i[y]+=u.am(0,v,i,A,0,l))<v)for(u.dlShiftTo(A,B),i.subTo(B,i);i[y]<--v;)i.subTo(B,i)}null!=r&&(i.drShiftTo(l,r),a!=h&&e.ZERO.subTo(r,r)),i.t=l,i.clamp(),f>0&&i.rShiftTo(f,i),a<0&&e.ZERO.subTo(i,i)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.exp=function(t,r){if(t>4294967295||t<1)return e.ONE;var i=n(),o=n(),s=r.convert(this),u=c(t)-1;for(s.copyTo(i);--u>=0;)if(r.sqrTo(i,o),(t&1<<u)>0)r.mulTo(o,s,i);else{var a=i;i=o,o=a}return r.revert(i)},e.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",u=this.t,a=this.DB-u*this.DB%e;if(u-- >0)for(a<this.DB&&(n=this[u]>>a)>0&&(i=!0,o=s(n));u>=0;)a<e?(n=(this[u]&(1<<a)-1)<<e-a,n|=this[--u]>>(a+=this.DB-e)):(n=this[u]>>(a-=e)&r,a<=0&&(a+=this.DB,--u)),n>0&&(i=!0),i&&(o+=s(n));return i?o:"0"},e.prototype.negate=function(){var t=n();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+c(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(t){var r=n();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r},e.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new h(e):new f(e),this.exp(t,n)},e.ZERO=a(0),e.ONE=a(1),y.prototype.convert=A,y.prototype.revert=A,y.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},y.prototype.sqrTo=function(t,e){t.squareTo(e)},B.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e},B.prototype.revert=function(t){return t},B.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},B.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},B.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var v=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],D=(1<<26)/v[v.length-1];return e.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},e.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=a(r),o=n(),s=n(),u="";for(this.divRemTo(i,o,s);o.signum()>0;)u=(r+s.intValue()).toString(t).substr(1)+u,o.divRemTo(i,o,s);return s.intValue().toString(t)+u},e.prototype.fromRadix=function(t,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),o=!1,s=0,a=0,c=0;c<t.length;++c){var h=u(t,c);h<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(a=n*a+h,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(a,0)),o&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(t,n,r){if("number"==typeof n)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),p,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),n.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},e.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},e.prototype.changeBit=function(t,n){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,n,r),r},e.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},e.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},e.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},e.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},e.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},e.prototype.millerRabin=function(t){var r=this.subtract(e.ONE),i=r.getLowestSetBit();if(i<=0)return!1;var o=r.shiftRight(i);(t=t+1>>1)>v.length&&(t=v.length);for(var s=n(),u=0;u<t;++u){s.fromInt(v[Math.floor(Math.random()*v.length)]);var a=s.modPow(o,this);if(0!=a.compareTo(e.ONE)&&0!=a.compareTo(r)){for(var c=1;c++<i&&0!=a.compareTo(r);)if(0==(a=a.modPowInt(2,this)).compareTo(e.ONE))return!1;if(0!=a.compareTo(r))return!1}}return!0},e.prototype.clone=function(){var t=n();return this.copyTo(t),t},e.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},e.prototype.equals=function(t){return 0==this.compareTo(t)},e.prototype.min=function(t){return this.compareTo(t)<0?this:t},e.prototype.max=function(t){return this.compareTo(t)>0?this:t},e.prototype.and=function(t){var e=n();return this.bitwiseTo(t,l,e),e},e.prototype.or=function(t){var e=n();return this.bitwiseTo(t,p,e),e},e.prototype.xor=function(t){var e=n();return this.bitwiseTo(t,d,e),e},e.prototype.andNot=function(t){var e=n();return this.bitwiseTo(t,m,e),e},e.prototype.not=function(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},e.prototype.shiftLeft=function(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},e.prototype.shiftRight=function(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},e.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+E(this[t]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=C(this[n]^e);return t},e.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},e.prototype.setBit=function(t){return this.changeBit(t,p)},e.prototype.clearBit=function(t){return this.changeBit(t,m)},e.prototype.flipBit=function(t){return this.changeBit(t,d)},e.prototype.add=function(t){var e=n();return this.addTo(t,e),e},e.prototype.subtract=function(t){var e=n();return this.subTo(t,e),e},e.prototype.multiply=function(t){var e=n();return this.multiplyTo(t,e),e},e.prototype.divide=function(t){var e=n();return this.divRemTo(t,e,null),e},e.prototype.remainder=function(t){var e=n();return this.divRemTo(t,null,e),e},e.prototype.divideAndRemainder=function(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)},e.prototype.modPow=function(t,e){var r,i,o=t.bitLength(),s=a(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new h(e):e.isEven()?new B(e):new f(e);var u=new Array,l=3,p=r-1,d=(1<<r)-1;if(u[1]=i.convert(this),r>1){var m=n();for(i.sqrTo(u[1],m);l<=d;)u[l]=n(),i.mulTo(m,u[l-2],u[l]),l+=2}var E,C,y=t.t-1,A=!0,v=n();for(o=c(t[y])-1;y>=0;){for(o>=p?E=t[y]>>o-p&d:(E=(t[y]&(1<<o+1)-1)<<p-o,y>0&&(E|=t[y-1]>>this.DB+o-p)),l=r;0==(1&E);)E>>=1,--l;if((o-=l)<0&&(o+=this.DB,--y),A)u[E].copyTo(s),A=!1;else{for(;l>1;)i.sqrTo(s,v),i.sqrTo(v,s),l-=2;l>0?i.sqrTo(s,v):(C=s,s=v,v=C),i.mulTo(v,u[E],s)}for(;y>=0&&0==(t[y]&1<<o);)i.sqrTo(s,v),C=s,s=v,v=C,--o<0&&(o=this.DB-1,--y)}return i.revert(s)},e.prototype.modInverse=function(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),i=this.clone(),o=a(1),s=a(0),u=a(0),c=a(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),n?(u.isEven()&&c.isEven()||(u.addTo(this,u),c.subTo(t,c)),u.rShiftTo(1,u)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),n&&o.subTo(u,o),s.subTo(c,s)):(i.subTo(r,i),n&&u.subTo(o,u),c.subTo(s,c))}return 0!=i.compareTo(e.ONE)?e.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},e.prototype.pow=function(t){return this.exp(t,new y)},e.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},e.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=v[v.length-1]){for(e=0;e<v.length;++e)if(n[0]==v[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<v.length;){for(var r=v[e],i=e+1;i<v.length&&r<D;)r*=v[i++];for(r=n.modInt(r);e<i;)if(r%v[e++]==0)return!1}return n.millerRabin(t)},e.prototype.square=function(){var t=n();return this.squareTo(t),t},e}),function(t){"use strict";"function"==typeof define&&define.amd?define("SRPClient",["sha1","sjcl","BigInteger"],t):window.SRPClient=t(sha1,sjcl,BigInteger)}(function(t,e,n){var r=function(t,e,r,i){if(!t)throw"Username cannot be empty.";this.username=t,this.password=e,this.hashFn=i||"sha-1";r=r||1024;var o=this.initVals[r];this.N=new n(o.N,16),this.g=new n(o.g,16),this.gBn=new n(o.g,16),this.k=this.k(),this.one=new n("1",16),this.two=new n("2",16)};return r.prototype={toHexString:function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},padLeft:function(t,e){return t.length>e?t:Array(e-t.length+1).join("0")+t},bytesToHex:function(t){var e=this;return t.map(function(t){return e.padLeft(e.toHexString(t),2)}).join("")},hexToBytes:function(t){if(t.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),t.match(/../g).map(function(t){return parseInt(t,16)})},stringToBytes:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e},bytesToString:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},k:function(){var t=[this.toHexString(this.N),this.toHexString(this.g)];return this.paddedHash(t)},calculateX:function(t){if(!t)throw"Missing parameter.";if(!this.username||!this.password)throw"Username and password cannot be empty.";var e=this.stringToBytes(this.username),r=this.hexToBytes(this.password),i=e.concat([58]).concat(r),o=this.hash(this.bytesToString(i)),s=this.hexToBytes(o),u=this.hexToBytes(t).concat(s),a=this.hash(this.bytesToString(u)),c=new n(a,16);if(c.compareTo(this.N)<0)return c;var h=new n(1,16);return c.mod(this.N.subtract(h))},calculateV:function(t){if(!t)throw"Missing parameter.";var e=this.calculateX(t);return this.g.modPow(e,this.N)},calculateU:function(t,e){if(!t||!e)throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";var n=[this.toHexString(t),this.toHexString(e)];return this.paddedHash(n)},canCalculateA:function(t){if(!t)throw"Missing parameter.";return Math.ceil(t.bitLength()/8)>=32},calculateA:function(t){if(!t)throw"Missing parameter.";if(!this.canCalculateA(t))throw"Client key length is less than 256 bits.";var e=this.g.modPow(t,this.N);if("0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";return e},calculateM1:function(t,e,r,i){if(!(t&&e&&r&&i))throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";for(var o=this.hexHash(this.toHexString(this.N)),s=this.hexHash(this.toHexString(this.g)),u=this.hash(this.username),a=[],c=this.hexToBytes(o),h=this.hexToBytes(s),f=0;f<c.length;f++)a[f]=c[f]^h[f];for(var l=[this.bytesToHex(a),u,i,this.toHexString(t),this.toHexString(e),r],p="",d=0;d<l.length;d++)p+=l[d];return new n(this.hexHash(p),16)},calculateM:function(t,e,n,r){if(!(t&&e&&n&&r))throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";for(var i=this.hexHash(this.toHexString(this.N)),o=this.hexHash(this.toHexString(this.g)),s=this.hash(this.username),u=[],a=this.hexToBytes(i),c=this.hexToBytes(o),h=0;h<a.length;h++)u[h]=a[h]^c[h];for(var f=[this.bytesToHex(u),s,r,this.toHexString(t),this.toHexString(e),n],l="",p=0;p<f.length;p++)l+=f[p];return this.hexHash(l)},calculateM2:function(t,e,r){if(!t||!e||!r)throw"Missing parameter(s).";if("0"==t.mod(this.N).toString()||"0"==e.mod(this.N).toString())throw"ABORT: illegal_parameter";for(var i=[this.toHexString(t),this.toHexString(e),r],o="",s=0;s<i.length;s++)o+=i[s];return new n(this.hexHash(o),16)},calculateS:function(t,e,n,r){if(!(t&&e&&n&&r))throw"Missing parameters.";if("0"==t.mod(this.N).toString())throw"ABORT: illegal_parameter";var i=this.calculateX(e),o=this.g.modPow(i,this.N);return t.add(this.N.multiply(this.k)).subtract(o.multiply(this.k)).mod(this.N).modPow(i.multiply(n).add(r),this.N)},calculateK:function(t){return this.hexHash(this.toHexString(t))},srpRandom:function(){var t=e.random.randomWords(8,0),r=e.codec.hex.fromBits(t);if(64!=r.length)throw"Invalid random number size.";var i=new n(r,16);return i.compareTo(this.N)>=0&&(i=a.mod(this.N.subtract(this.one))),i.compareTo(this.two)<0&&(i=two),i},randomHexSalt:function(){var t=e.random.randomWords(8,0);return e.codec.hex.fromBits(t)},paddedHash:function(t){for(var e=2*(4*this.toHexString(this.N).length+7>>3),r="",i=0;i<t.length;i++)r+=this.nZeros(e-t[i].length)+t[i];return new n(this.hexHash(r),16).mod(this.N)},hash:function(n){switch(this.hashFn.toLowerCase()){case"sha-256":var r=e.codec.hex.fromBits(e.hash.sha256.hash(n));return this.nZeros(64-r.length)+r;case"sha-1":default:return t.calcSHA1(n)}},hexHash:function(t){switch(this.hashFn.toLowerCase()){case"sha-256":var n=e.codec.hex.fromBits(e.hash.sha256.hash(e.codec.hex.toBits(t)));return this.nZeros(64-n.length)+n;case"sha-1":default:return this.hash(this.pack(t))}},pack:function(t){for(t.length%2!=0&&(t="0"+t),i=0,ascii="";i<t.length/2;)ascii+=String.fromCharCode(parseInt(t.substr(2*i,2),16)),i++;return ascii},nZeros:function(t){if(t<1)return"";var e=this.nZeros(t>>1);return 0==(1&t)?e+e:e+e+"0"},initVals:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:"2"},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:"2"},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:"2"},3072:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",g:"5"},4096:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",g:"5"},6144:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DCC4024FFFFFFFFFFFFFFFF",g:"5"},8192:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD922222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC8862F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A66D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC50846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E7160C980DD98EDD3DFFFFFFFFFFFFFFFFF",g:"19"}},calculateB:function(t,e){if(!t||!e)throw"Missing parameters.";return this.g.modPow(t,this.N).add(e.multiply(this.k)).mod(this.N)},calculateServerS:function(t,e,n,r){if(!(t&&e&&n&&r))throw"Missing parameters.";if("0"==t.mod(this.N).toString()||"0"==r.mod(this.N).toString())throw"ABORT: illegal_parameter";return e.modPow(n,this.N).multiply(t).mod(this.N).modPow(r,this.N)}},r}),function(){"use strict";function t(t){return"function"==typeof t}var e,n,r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=function(t,e){C[i]=t,C[i+1]=e,2===(i+=2)&&(n?n(y):l())};var s="undefined"!=typeof window?window:void 0,u=s||{},a=u.MutationObserver||u.WebKitMutationObserver,c="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){return function(){setTimeout(y,1)}}var l,p,d,m,E,C=new Array(1e3);function y(){for(var t=0;t<i;t+=2){(0,C[t])(C[t+1]),C[t]=void 0,C[t+1]=void 0}i=0}function A(){}c?l=function(){process.nextTick(y)}:a?(d=0,m=new a(y),E=document.createTextNode(""),m.observe(E,{characterData:!0}),l=function(){E.data=d=++d%2}):h?((p=new MessageChannel).port1.onmessage=y,l=function(){p.port2.postMessage(0)}):l=void 0===s&&"function"==typeof require?function(){try{var t=require("@vertx/core");return e=t.runOnLoop||t.runOnContext,function(){e(y)}}catch(t){return f()}}():f();var B=void 0,v=new T;function D(e,n){if(n.constructor===e.constructor)!function(t,e){1===e._state?w(t,e._result):2===e._state?b(t,e._result):S(e,void 0,function(e){F(t,e)},function(e){b(t,e)})}(e,n);else{var r=function(t){try{return t.then}catch(t){return v.error=t,v}}(n);r===v?b(e,v.error):void 0===r?w(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?F(t,n):w(t,n))},function(e){r||(r=!0,b(t,e))},t._label);!r&&i&&(r=!0,b(t,i))},t)}(e,n,r):w(e,n)}}function F(t,e){var n;t===e?b(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?D(t,e):w(t,e)}function g(t){t._onerror&&t._onerror(t._result),_(t)}function w(t,e){t._state===B&&(t._result=e,t._state=1,0!==t._subscribers.length&&o(_,t))}function b(t,e){t._state===B&&(t._state=2,t._result=e,o(g,t))}function S(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+1]=n,i[s+2]=r,0===s&&t._state&&o(_,t)}function _(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?x(n,r,i,o):i(o);t._subscribers.length=0}}function T(){this.error=null}var k=new T;function x(e,n,r,i){var o,s,u,a,c=t(r);if(c){if((o=function(t,e){try{return t(e)}catch(t){return k.error=t,k}}(r,i))===k?(a=!0,s=o.error,o=null):u=!0,n===o)return void b(n,new TypeError("A promises callback cannot return that same promise."))}else o=i,u=!0;n._state!==B||(c&&u?F(n,o):a?b(n,s):1===e?w(n,o):2===e&&b(n,o))}function R(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(A),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?w(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&w(n.promise,n._result))):b(n.promise,n._validationError())}R.prototype._validateInput=function(t){return r(t)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)};var I=R;R.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===B&&i<e;i++)t._eachEntry(r[i],i)},R.prototype._eachEntry=function(t,e){var n,r=this,i=r._instanceConstructor;"object"==typeof(n=t)&&null!==n?t.constructor===i&&t._state!==B?(t._onerror=null,r._settledAt(t._state,e,t._result)):r._willSettleAt(i.resolve(t),e):(r._remaining--,r._result[e]=t)},R.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===B&&(r._remaining--,2===t?b(i,n):r._result[e]=n),0===r._remaining&&w(i,r._result)},R.prototype._willSettleAt=function(t,e){var n=this;S(t,void 0,function(t){n._settledAt(1,e,t)},function(t){n._settledAt(2,e,t)})};var O=function(t){return new I(this,t).promise};var W=function(t){var e=new this(A);if(!r(t))return b(e,new TypeError("You must pass an array to race.")),e;var n=t.length;function i(t){F(e,t)}function o(t){b(e,t)}for(var s=0;e._state===B&&s<n;s++)S(this.resolve(t[s]),void 0,i,o);return e};var M=function(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return F(e,t),e};var P=function(t){var e=new this(A);return b(e,t),e},L=0;var N=j;function j(e){this._id=L++,this._state=void 0,this._result=void 0,this._subscribers=[],A!==e&&(t(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof j||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e(function(e){F(t,e)},function(e){b(t,e)})}catch(e){b(t,e)}}(this,e))}j.all=O,j.race=W,j.resolve=M,j.reject=P,j._setScheduler=function(t){n=t},j._setAsap=function(t){o=t},j._asap=o,j.prototype={constructor:j,then:function(t,e){var n=this,r=n._state;if(1===r&&!t||2===r&&!e)return this;var i=new this.constructor(A),s=n._result;if(r){var u=arguments[r-1];o(function(){x(r,i,u,s)})}else S(n,i,t,e);return i},catch:function(t){return this.then(null,t)}};var H=function(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=N)},q={Promise:N,polyfill:H};"function"==typeof define&&define.amd?define("ES6Promise",function(){return q}):"undefined"!=typeof module&&module.exports?module.exports=q:void 0!==this&&(this.ES6Promise=q),H()}.call(this),function(t){"use strict";"function"==typeof define&&define.amd?define("WebSdkCore",[],t):window.WebSdkCore=t()}(function(){var t={WebSdk:{Promise:null,debug:!1,version:4},WebSdkEncryptionSupport:{None:1,Encoding:2,Encryption:3,AESEncryption:4},WebSdkDataSupport:{Binary:1,String:2},log:function(){t.WebSdk.debug&&(console.log.apply?console.log.apply(console,[].slice.call(arguments)):console.log(arguments[0]))}};return t}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdkCore.utils",["WebSdkCore"],t);else{if(!window.WebSdkCore)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.utils=t(window.WebSdkCore)}}(function(t){function e(t){return t.promise=new window.Promise(function(e,n){t.resolve=e,t.reject=n}),t}return{getQueryParam:function(t,e){var n=RegExp("[?&]"+e+"=([^&]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},ajax:function(t,e,n){return new window.Promise(function(r,i){var o=new XMLHttpRequest;if(o.open(t,e,!0),o.responseType="json",o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){var t;this.readyState===XMLHttpRequest.DONE&&(200===this.status?(t=""===this.responseType&&"string"==typeof this.responseText?JSON.parse(this.responseText):this.response,r(t)):i(this))},"post"===t.toLowerCase()&&n){var s,u,a=[];for(u in n)a.push(encodeURIComponent(u)+"="+encodeURIComponent(n[u]));s=a.join("&").replace(/%20/g,"+"),o.send(s)}else o.send()})},tryParseJson:function(t){if(!t)return null;var e;try{e=JSON.parse(t)}catch(t){e=null}return e},Deferred:function t(){return e(this instanceof t?this:Object.create(t.prototype))},FixedQueue:function(){function t(t){this.m_items=[],this.m_maxSize=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.m_items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.m_items},enumerable:!0,configurable:!0}),t.prototype.trimHead=function(){this.m_items.length<=this.m_maxSize||Array.prototype.splice.call(this.m_items,0,this.m_items.length-this.m_maxSize)},t.prototype.trimTail=function(){this.m_items.length<=this.m_maxSize||Array.prototype.splice.call(this.m_items,this.m_maxSize,this.m_items.length-this.m_maxSize)},t.prototype.push=function(){var t=Array.prototype.push.apply(this.m_items,arguments);return this.trimHead(),t},t.prototype.splice=function(){var t=Array.prototype.splice.apply(this.m_items,arguments);return this.trimTail(),t},t.prototype.unshift=function(){var t=Array.prototype.unshift.apply(this.m_items,arguments);return this.trimTail(),t},t}()}}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdkCore.configurator",["WebSdkCore","WebSdkCore.utils"],t);else{if(!window.WebSdkCore)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.configurator=t(window.WebSdkCore,window.WebSdkCore.utils)}}(function(t,e){function n(){this.m_key="websdk";var t=e.tryParseJson(sessionStorage.getItem(this.m_key));t&&(this.m_port=parseInt(t.port),this.m_host=t.host||"127.0.0.1",this.m_isSecure=t.isSecure,this.m_srp=t.srp)}return Object.defineProperty(n.prototype,"url",{get:function(){return this.m_port&&this.m_host?(this.m_isSecure?"https":"http")+"://"+this.m_host+":"+this.m_port.toString():null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"srp",{get:function(){return this.m_srp},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sessionId",{get:function(){return sessionStorage.getItem("websdk.sessionId")},set:function(t){return sessionStorage.setItem("websdk.sessionId",t)},enumerable:!0,configurable:!0}),n.prototype.ensureLoaded=function(n){if(t.log("Configurator: ensureLoaded"),this.url&&this.srp)return n(null);var r=this;e.ajax("get","https://127.0.0.1:52181/get_connection").then(function(e){t.log("Configurator: findConfiguration -> ",e),e&&e.endpoint&&r.tryParse(e.endpoint)?n(null):n(new Error("Cannot load configuration"))}).catch(function(e){t.log("Configurator: findConfiguration -> ERROR ",e),n(e)})},n.prototype.tryParse=function(n){t.log("Configurator: tryParse "+n);var r=document.createElement("a");r.href=n;var i=parseInt(e.getQueryParam(r.search,"web_sdk_port")||""),o="true"==e.getQueryParam(r.search,"web_sdk_secure"),s=r.hostname,u=e.getQueryParam(r.search,"web_sdk_username"),a=e.getQueryParam(r.search,"web_sdk_password"),c=e.getQueryParam(r.search,"web_sdk_salt");return!!(i&&s&&u&&a&&c)&&(this.m_port=i,this.m_host=s,this.m_isSecure=o,this.m_srp={p1:u,p2:a,salt:c},sessionStorage.setItem(this.m_key,JSON.stringify({port:this.m_port,host:this.m_host,isSecure:this.m_isSecure,srp:this.m_srp})),!0)},new n}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdkCore.cipher",["WebSdkCore"],t);else{if(!window.WebSdkCore)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.cipher=t(window.WebSdkCore)}}(function(t){var e=1,n=2,r=window.crypto||window.msCrypto;function i(t){var e=function(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))})}(t);return btoa(e)}function o(t){return function(t){var e=t.replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n});return decodeURIComponent(e)}(atob(t))}function s(t,e){return Array.prototype.map.call(e,function(t){return t}).map(function(e,n){return String.fromCharCode(e.charCodeAt(0)^function(t,e){return t.charCodeAt(Math.floor(e%t.length))}(t,n))}).join("")}function u(t,e){var n=new DataView(t);n.setUint8(0,1),n.setUint8(1,e),n.setUint32(2,t.byteLength-8,!0),n.setUint16(6,8,!0)}function a(t){return new window.Promise(function(e,n){var r=new Blob([new Uint8Array(t)]),i=new FileReader;i.onload=function(t){return e(t.target.result)},i.onerror=function(t){return n(t.target.error)},i.readAsText(r,"utf-16")})}function c(t){return r.subtle.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt","decrypt"])}function h(t){var e=["encrypt","decrypt"];return new window.Promise(function(n,i){var o=r.subtle.importKey("raw",t,{name:"AES-CBC"},false,e);o.oncomplete=function(t){n(o.result)},o.onerror=function(t){i(new Error("Cannot create a key..."))}})}function f(t,e,n){return void 0!==window.crypto?c(e).then(function(e){return function(t,e,n){return r.subtle.encrypt({name:"AES-CBC",iv:n},e,t)}(t,e,n)}):h(e).then(function(e){return function(t,e,n){return new window.Promise(function(i,o){var s=r.subtle.encrypt({name:"AES-CBC",iv:n},e,t);s.oncomplete=function(t){i(s.result)},s.onerror=function(t){o(new Error("Fail to encrypt data..."))}})}(t,e,n)})}function l(t,e,n){return void 0!==window.crypto?c(e).then(function(e){return function(t,e,n){return r.subtle.decrypt({name:"AES-CBC",iv:n},e,t)}(t,e,n)}):h(e).then(function(e){return function(t,e,n){return new window.Promise(function(i,o){var s=r.subtle.decrypt({name:"AES-CBC",iv:n},e,t);s.oncomplete=function(t){i(s.result)},s.onerror=function(t){o(new Error("Fail to encrypt data..."))}})}(t,e,n)})}function p(t){if(t.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),new Uint8Array(t.match(/../g).map(function(t){return parseInt(t,16)}))}function d(t){return new window.Promise(function(e,n){setTimeout(function(){e(t)})})}function m(t,r,i){var o=new Uint8Array(p(r).buffer,0,16);return f("string"==typeof i?function(t){var e=new ArrayBuffer(2*t.length+8);u(e,n);for(var r=new Uint16Array(e,8),i=0,o=t.length;i<o;i++)r[i]=t.charCodeAt(i);return e}(i):function(t){var n=new ArrayBuffer(t.length+8);u(n,e);var r=new Uint8Array(t);return new Uint8Array(n,8).set(r),n}(i),t,o)}function E(t,r,i){return l(i,t,new Uint8Array(p(r).buffer,0,16)).then(function(t){var r,i={version:(r=new DataView(t)).getUint8(0),type:r.getUint8(1),length:r.getUint32(2,!0),offset:r.getUint16(6,!0)};if(1!==i.version)throw new Error("Invalid data version!");switch(i.type){case e:return t.slice(i.offset);case n:return a(t.slice(i.offset));default:throw new Error("Invalid data type!")}return a(t)})}return{encode:function(e,n,r){switch(t.WebSdk.version){case t.WebSdkEncryptionSupport.AESEncryption:return m(e,n,r);case t.WebSdkEncryptionSupport.Encryption:return d(i(s(n,r)));case t.WebSdkEncryptionSupport.Encoding:return d(i(r));default:return d(r)}},decode:function(e,n,r){switch(t.WebSdk.version){case t.WebSdkEncryptionSupport.AESEncryption:return E(e,n,r);case t.WebSdkEncryptionSupport.Encryption:return d(s(n,o(r)));case t.WebSdkEncryptionSupport.Encoding:return d(o(r));default:return d(r)}},isCryptoSupported:function(){return void 0!==r&&r.subtle&&r.subtle.importKey&&r.subtle.encrypt},hexToBytes:function(t){return p(t)}}}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdkCore.channelOptions",["WebSdkCore"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.channelOptions=t(e)}}(function(t){return function(e){e||(e={});var n=t.WebSdkEncryptionSupport.AESEncryption,r=!0===e.debug;function i(e){for(var n in t.WebSdkEncryptionSupport)if(t.WebSdkEncryptionSupport.hasOwnProperty(n)&&t.WebSdkEncryptionSupport[n]===e)return;throw new Error("invalid WebSdk version requested")}e.version&&(i(e.version),n=e.version),Object.defineProperties(this,{version:{get:function(){return n},set:function(t){i(t),n=t},enumerable:!0},debug:{get:function(){return r},set:function(){r=value},enumerable:!0}})}}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdkCore.channelClientImplementation",["async","sjcl","BigInteger","SRPClient","ES6Promise","WebSdkCore","WebSdkCore.utils","WebSdkCore.configurator","WebSdkCore.cipher"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.channelClientImplementation=t(async,sjcl,BigInteger,SRPClient,ES6Promise,e,e.utils,e.configurator,e.cipher)}}(function(t,e,n,r,i,o,s,u,a){function c(t){if(!t)throw new Error("clientPath cannot be empty");o.log("WebSdkVersion: ",o.WebSdk.version,"clientPath: ",t),this.clientPath=t,this.wsThreshold=10240,this.wsQueueInterval=1e3,this.wsQueueLimit=100,this.wsReconnectInterval=5e3,this.queue=new s.FixedQueue(this.wsQueueLimit),this.queueInterval=null,this.webSocket=null,this.sessionKey=null,this.M1=null,this.reconnectTimer=null,this.onConnectionFailed=null,this.onConnectionSucceed=null,this.onDataReceivedBin=null,this.onDataReceivedTxt=null;var e=this;window.parent.parent.addEventListener("blur",function(){e.resetReconnectTimer(),e.notifyFocusChanged(!1)}),window.parent.parent.addEventListener("focus",function(){e.notifyFocusChanged(!0)})}return window.Promise||(window.Promise=i.Promise),c.prototype.notifyFocusChanged=function(t){if(this.isConnected()){o.log("WebChannelClientImpl: notifyFocusChanged ->",t);var e={type:"sdk.focusChanged",data:t};this.sendData(JSON.stringify(e))}},c.prototype.fireConnectionFailed=function(){window.parent.parent.document.hasFocus()&&this.setReconnectTimer(),this.onConnectionFailed&&this.onConnectionFailed()},c.prototype.fireConnectionSucceed=function(){this.onConnectionSucceed&&this.onConnectionSucceed()},c.prototype.resetReconnectTimer=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},c.prototype.setReconnectTimer=function(){this.resetReconnectTimer();var t=this;this.reconnectTimer=setInterval(function(){t.connectInternal(!1)},this.wsReconnectInterval)},c.prototype.wsconnect=function(t){o.log("WebChannelClientImpl: wsconnect "+t);var e=this,n=s.Deferred();if(this.webSocket&&this.webSocket.readyState!==WebSocket.CLOSED)throw new Error("wsdisconnect has not been called");return this.webSocket=new WebSocket(t),this.webSocket.binaryType="arraybuffer",this.webSocket.onclose=function(t){return o.log("WebChannelClientImpl: wsonclose"),e.wsonclose(!0)},this.webSocket.onopen=function(t){o.log("WebChannelClientImpl: wsonopen"),n.resolve(),window.parent.parent.document.hasFocus()?e.notifyFocusChanged(!0):e.notifyFocusChanged(!1)},this.webSocket.onerror=function(t){return o.log("WebChannelClientImpl: wsonerror "+arguments),n.reject(new Error("WebSocket connection failed."))},this.webSocket.onmessage=function(t){return e.wsonmessage(t)},n.promise},c.prototype.wsdisconnect=function(){var t=this,e=s.Deferred();return this.webSocket&&this.webSocket.readyState===WebSocket.OPEN?(this.webSocket.onclose=function(n){t.wsonclose(!1),e.resolve()},this.webSocket.close()):e.resolve(),e.promise},c.prototype.wsonclose=function(t){o.log("WebChannelClientImpl: connection closed"),this.webSocket.onclose=null,this.webSocket.onopen=null,this.webSocket.onmessage=null,this.webSocket.onerror=null,this.deactivateBufferCheck(),t&&this.fireConnectionFailed()},c.prototype.wsonmessage=function(t){var e=this;a.decode(this.sessionKey,this.M1,t.data).then(function(t){"string"==typeof t?e.onDataReceivedTxt&&e.onDataReceivedTxt(t):e.onDataReceivedBin&&e.onDataReceivedBin(t)})},c.prototype.wssend=function(t){return!!this.isConnected()&&(this.webSocket.bufferedAmount>=this.wsThreshold?(this.activateBufferCheck(),!1):(this.webSocket.send(t),!0))},c.prototype.generateSessionKey=function(t){var i=u.srp;if(!i.p1||!i.p2||!i.salt)return t(new Error("No data available for authentication"));var c,h=this,f=new r(i.p1,i.p2);do{c=f.srpRandom()}while(!f.canCalculateA(c));var l=f.calculateA(c);o.WebSdk.version>=o.WebSdkEncryptionSupport.AESEncryption&&!a.isCryptoSupported()&&(o.WebSdk.version=o.WebSdkEncryptionSupport.Encryption),s.ajax("post",u.url+"/connect",{username:i.p1,A:f.toHexString(l),version:o.WebSdk.version.toString()}).then(function(r){void 0===r.version?o.WebSdk.version=Math.min(o.WebSdk.version,o.WebSdkEncryptionSupport.Encryption):o.WebSdk.version=r.version;var s=new n(r.B,16),u=f.calculateU(l,s),p=f.calculateS(s,i.salt,u,c),d=f.calculateK(p),m=f.calculateM(l,s,d,i.salt);h.sessionKey=a.hexToBytes(e.codec.hex.fromBits(e.hash.sha256.hash(e.codec.hex.toBits(d)))),h.M1=m,t(null,m)}).catch(t)},c.prototype.setupSecureChannel=function(n){o.log("WebChannelClientImpl.setupSecureChannel");var r=this;t.waterfall([function(t){r.generateSessionKey(t)},function(t,n){var i=u.url.replace("http","ws")+"/"+r.clientPath+"?username="+u.srp.p1+"&M1="+r.M1;u.sessionId||(u.sessionId=e.codec.hex.fromBits(e.random.randomWords(2,0))),i+="&sessionId="+u.sessionId,i+="&version="+o.WebSdk.version.toString(),r.wsconnect(i).then(function(){n(null)}).catch(function(t){o.log(t),n(t)})}],n)},c.prototype.isConnected=function(){return!!this.webSocket&&this.webSocket.readyState===WebSocket.OPEN},c.prototype.sendData=function(t){this.wssend(t)||this.queue.push(t)},c.prototype.deactivateBufferCheck=function(){this.queueInterval&&(clearInterval(this.queueInterval),this.queueInterval=null)},c.prototype.activateBufferCheck=function(){if(!this.queueInterval){var t=this;this.queueInterval=setInterval(function(){t.processMessageQueue(),0===t.queue.length&&t.deactivateBufferCheck()},this.wsQueueInterval)}},c.prototype.processMessageQueue=function(){if(o.log("WebChannelClientImpl: processMessageQueue "+this.queue.length),0!==this.queue.length)for(;0<this.queue.length&&this.wssend(this.queue.items[0]);)this.queue.splice(0,1)},c.prototype.connectInternal=function(e){o.log("WebChannelClientImpl.connectInternal"),this.resetReconnectTimer();var n=this;t.waterfall([function(t){u.ensureLoaded(t)},function(r){t.retry(e?3:1,function(){n.setupSecureChannel(r)},r)}],function(t){if(t)return n.fireConnectionFailed();n.fireConnectionSucceed(),n.processMessageQueue()})},c.prototype.connect=function(){this.connectInternal(!0)},c.prototype.disconnect=function(){this.wsdisconnect()},c.prototype.sendDataBin=function(t){var e=this;a.encode(this.sessionKey,this.M1,t).then(function(t){e.sendData(t)})},c.prototype.sendDataTxt=function(t){var e=this;a.encode(this.sessionKey,this.M1,t).then(function(t){e.sendData(t)})},c}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdkCore.channelClient",["WebSdkCore","WebSdkCore.channelOptions","WebSdkCore.channelClientImplementation"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdkCore.channelClient=t(e,e.channelOptions,e.channelClientImplementation)}}(function(t,e,n){return function(r,i){if(i){t.log(i);var o=new e(i);t.WebSdk.debug=o.debug,t.WebSdk.version=o.version}var s=new n(r);Object.defineProperties(this,{path:{get:function(){return r},enumerable:!0},onConnectionFailed:{get:function(){return s.onConnectionFailed},set:function(t){s.onConnectionFailed=t},enumerable:!0},onConnectionSucceed:{get:function(){return s.onConnectionSucceed},set:function(t){s.onConnectionSucceed=t},enumerable:!0},onDataReceivedBin:{get:function(){return s.onDataReceivedBin},set:function(t){s.onDataReceivedBin=t},enumerable:!0},onDataReceivedTxt:{get:function(){return s.onDataReceivedTxt},set:function(t){s.onDataReceivedTxt=t},enumerable:!0}}),this.connect=function(){s.connect()},this.disconnect=function(){s.disconnect()},this.isConnected=function(){return s.isConnected()},this.sendDataBin=function(t){s.sendDataBin(t)},this.sendDataTxt=function(t){s.sendDataTxt(t)},this.resetReconnectTimer=function(){s.resetReconnectTimer()}}}),function(t){"use strict";if("function"==typeof define&&define.amd)define("WebSdk",["WebSdkCore","WebSdkCore.channelOptions","WebSdkCore.channelClient"],t);else{var e=window.WebSdkCore;if(!e)throw new Error("WebSdkCore is not loaded.");window.WebSdk=t(e,e.channelOptions,e.channelClient)}}(function(t,e,n){return t.log("loaded websdk.client"),{WebChannelOptions:e,WebChannelClient:n}});